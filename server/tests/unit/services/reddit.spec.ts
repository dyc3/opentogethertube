import { describe, it, expect, beforeAll, beforeEach, afterAll, afterEach, vi } from "vitest";
import RedditAdapter, {
	RedditListableThing,
	RedditListing,
	RedditPost,
} from "../../../../server/services/reddit";

const subredditListResponse: RedditListing<RedditListableThing> = {
	kind: "Listing",
	data: {
		modhash: "",
		dist: 4,
		children: [
			{
				kind: "t3",
				data: {
					approved_at_utc: null,
					subreddit: "youtubehaiku",
					selftext: "",
					author_fullname: "t2_53ndd",
					saved: false,
					mod_reason_title: null,
					gilded: 0,
					clicked: false,
					title: "Happy Birthday to this subreddit. Here's the first example of a YouTube [Haiku] from this day 9 years ago.",
					link_flair_richtext: [],
					subreddit_name_prefixed: "r/youtubehaiku",
					hidden: false,
					pwls: 6,
					link_flair_css_class: "haiku",
					downs: 0,
					thumbnail_height: 105,
					top_awarded_type: null,
					hide_score: false,
					name: "t3_m62yl6",
					quarantine: false,
					link_flair_text_color: "dark",
					upvote_ratio: 0.98,
					author_flair_background_color: null,
					subreddit_type: "public",
					ups: 4099,
					total_awards_received: 7,
					media_embed: {
						content:
							'&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/yr_Rpk9HR1g?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 356,
						scrolling: false,
						height: 200,
					},
					thumbnail_width: 140,
					author_flair_template_id: null,
					is_original_content: false,
					user_reports: [],
					secure_media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "Super \u041c\u0430\u0440\u0438\u043e Brothers",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 356,
							html: '&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/yr_Rpk9HR1g?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "rawrderder",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/yr_Rpk9HR1g/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/user/rawrderder",
						},
					},
					is_reddit_media_domain: false,
					is_meta: false,
					category: null,
					secure_media_embed: {
						content:
							'&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/yr_Rpk9HR1g?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 356,
						scrolling: false,
						media_domain_url: "https://www.redditmedia.com/mediaembed/m62yl6",
						height: 200,
					},
					link_flair_text: "Haiku",
					can_mod_post: false,
					score: 4099,
					approved_by: null,
					author_premium: false,
					thumbnail:
						"https://a.thumbs.redditmedia.com/gJBuxJ4uq7H7k5dpPfmAyhMvNP694lhlkf-AgsCoJj8.jpg",
					edited: false,
					author_flair_css_class: null,
					author_flair_richtext: [],
					gildings: { gid_1: 2 },
					post_hint: "rich:video",
					content_categories: ["videos"],
					is_self: false,
					mod_note: null,
					created: 1615906025.0,
					link_flair_type: "text",
					wls: 6,
					removed_by_category: null,
					banned_by: null,
					author_flair_type: "text",
					domain: "youtu.be",
					allow_live_comments: true,
					selftext_html: null,
					likes: null,
					suggested_sort: null,
					banned_at_utc: null,
					url_overridden_by_dest: "https://youtu.be/yr_Rpk9HR1g",
					view_count: null,
					archived: false,
					no_follow: false,
					is_crosspostable: false,
					pinned: false,
					over_18: false,
					preview: {
						images: [
							{
								source: {
									url: "https://external-preview.redd.it/bglIebef6xBPdkdZFzGczKHSd9VH3Ui6QGLvMFQrgjQ.jpg?auto=webp&amp;s=9ffdf83fb0e3e5d369857de1e47b990efc0eb527",
									width: 480,
									height: 360,
								},
								resolutions: [
									{
										url: "https://external-preview.redd.it/bglIebef6xBPdkdZFzGczKHSd9VH3Ui6QGLvMFQrgjQ.jpg?width=108&amp;crop=smart&amp;auto=webp&amp;s=b812662f50d9b4e533653920efb3c3d52af8d607",
										width: 108,
										height: 81,
									},
									{
										url: "https://external-preview.redd.it/bglIebef6xBPdkdZFzGczKHSd9VH3Ui6QGLvMFQrgjQ.jpg?width=216&amp;crop=smart&amp;auto=webp&amp;s=5d288185d74f004155a2cd964c23047acd256cc1",
										width: 216,
										height: 162,
									},
									{
										url: "https://external-preview.redd.it/bglIebef6xBPdkdZFzGczKHSd9VH3Ui6QGLvMFQrgjQ.jpg?width=320&amp;crop=smart&amp;auto=webp&amp;s=c4270b90f6ac79cec803e147a9844244a794a44a",
										width: 320,
										height: 240,
									},
								],
								variants: {},
								id: "yeo_bOlxOPtArZ1RV56Yo05PkK84f3nXRZ6_6auGxvM",
							},
						],
						enabled: false,
					},
					all_awardings: [
						{
							giver_coin_reward: null,
							subreddit_id: null,
							is_new: false,
							days_of_drip_extension: 0,
							coin_price: 150,
							id: "award_f44611f1-b89e-46dc-97fe-892280b13b82",
							penny_donate: null,
							award_sub_type: "GLOBAL",
							coin_reward: 0,
							icon_url:
								"https://i.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png",
							days_of_premium: 0,
							tiers_by_required_awardings: null,
							resized_icons: [
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=16&amp;height=16&amp;auto=webp&amp;s=a5662dfbdb402bf67866c050aa76c31c147c2f45",
									width: 16,
									height: 16,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=32&amp;height=32&amp;auto=webp&amp;s=a6882eb3f380e8e88009789f4d0072e17b8c59f1",
									width: 32,
									height: 32,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=48&amp;height=48&amp;auto=webp&amp;s=e50064b090879e8a0b55e433f6ee61d5cb5fbe1d",
									width: 48,
									height: 48,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=64&amp;height=64&amp;auto=webp&amp;s=8e5bb2e76683cb6b161830bcdd9642049d6adc11",
									width: 64,
									height: 64,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=128&amp;height=128&amp;auto=webp&amp;s=eda4a9246f95f42ee6940cc0ec65306fd20de878",
									width: 128,
									height: 128,
								},
							],
							icon_width: 2048,
							static_icon_width: 2048,
							start_date: null,
							is_enabled: true,
							awardings_required_to_grant_benefits: null,
							description: "Thank you stranger. Shows the award.",
							end_date: null,
							subreddit_coin_reward: 0,
							count: 3,
							static_icon_height: 2048,
							name: "Helpful",
							resized_static_icons: [
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=16&amp;height=16&amp;auto=webp&amp;s=a5662dfbdb402bf67866c050aa76c31c147c2f45",
									width: 16,
									height: 16,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=32&amp;height=32&amp;auto=webp&amp;s=a6882eb3f380e8e88009789f4d0072e17b8c59f1",
									width: 32,
									height: 32,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=48&amp;height=48&amp;auto=webp&amp;s=e50064b090879e8a0b55e433f6ee61d5cb5fbe1d",
									width: 48,
									height: 48,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=64&amp;height=64&amp;auto=webp&amp;s=8e5bb2e76683cb6b161830bcdd9642049d6adc11",
									width: 64,
									height: 64,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png?width=128&amp;height=128&amp;auto=webp&amp;s=eda4a9246f95f42ee6940cc0ec65306fd20de878",
									width: 128,
									height: 128,
								},
							],
							icon_format: null,
							icon_height: 2048,
							penny_price: null,
							award_type: "global",
							static_icon_url:
								"https://i.redd.it/award_images/t5_22cerq/klvxk1wggfd41_Helpful.png",
						},
						{
							giver_coin_reward: null,
							subreddit_id: null,
							is_new: false,
							days_of_drip_extension: 0,
							coin_price: 125,
							id: "award_5f123e3d-4f48-42f4-9c11-e98b566d5897",
							penny_donate: null,
							award_sub_type: "GLOBAL",
							coin_reward: 0,
							icon_url:
								"https://i.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png",
							days_of_premium: 0,
							tiers_by_required_awardings: null,
							resized_icons: [
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=16&amp;height=16&amp;auto=webp&amp;s=92932f465d58e4c16b12b6eac4ca07d27e3d11c0",
									width: 16,
									height: 16,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=32&amp;height=32&amp;auto=webp&amp;s=d11484a208d68a318bf9d4fcf371171a1cb6a7ef",
									width: 32,
									height: 32,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=48&amp;height=48&amp;auto=webp&amp;s=febdf28b6f39f7da7eb1365325b85e0bb49a9f63",
									width: 48,
									height: 48,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=64&amp;height=64&amp;auto=webp&amp;s=b4406a2d88bf86fa3dc8a45aacf7e0c7bdccc4fb",
									width: 64,
									height: 64,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=128&amp;height=128&amp;auto=webp&amp;s=19555b13e3e196b62eeb9160d1ac1d1b372dcb0b",
									width: 128,
									height: 128,
								},
							],
							icon_width: 2048,
							static_icon_width: 2048,
							start_date: null,
							is_enabled: true,
							awardings_required_to_grant_benefits: null,
							description: "When you come across a feel-good thing.",
							end_date: null,
							subreddit_coin_reward: 0,
							count: 1,
							static_icon_height: 2048,
							name: "Wholesome",
							resized_static_icons: [
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=16&amp;height=16&amp;auto=webp&amp;s=92932f465d58e4c16b12b6eac4ca07d27e3d11c0",
									width: 16,
									height: 16,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=32&amp;height=32&amp;auto=webp&amp;s=d11484a208d68a318bf9d4fcf371171a1cb6a7ef",
									width: 32,
									height: 32,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=48&amp;height=48&amp;auto=webp&amp;s=febdf28b6f39f7da7eb1365325b85e0bb49a9f63",
									width: 48,
									height: 48,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=64&amp;height=64&amp;auto=webp&amp;s=b4406a2d88bf86fa3dc8a45aacf7e0c7bdccc4fb",
									width: 64,
									height: 64,
								},
								{
									url: "https://preview.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png?width=128&amp;height=128&amp;auto=webp&amp;s=19555b13e3e196b62eeb9160d1ac1d1b372dcb0b",
									width: 128,
									height: 128,
								},
							],
							icon_format: null,
							icon_height: 2048,
							penny_price: null,
							award_type: "global",
							static_icon_url:
								"https://i.redd.it/award_images/t5_22cerq/5izbv4fn0md41_Wholesome.png",
						},
						{
							giver_coin_reward: null,
							subreddit_id: null,
							is_new: false,
							days_of_drip_extension: 0,
							coin_price: 100,
							id: "gid_1",
							penny_donate: null,
							award_sub_type: "GLOBAL",
							coin_reward: 0,
							icon_url:
								"https://www.redditstatic.com/gold/awards/icon/silver_512.png",
							days_of_premium: 0,
							tiers_by_required_awardings: null,
							resized_icons: [
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_16.png",
									width: 16,
									height: 16,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_32.png",
									width: 32,
									height: 32,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_48.png",
									width: 48,
									height: 48,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_64.png",
									width: 64,
									height: 64,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_128.png",
									width: 128,
									height: 128,
								},
							],
							icon_width: 512,
							static_icon_width: 512,
							start_date: null,
							is_enabled: true,
							awardings_required_to_grant_benefits: null,
							description: "Shows the Silver Award... and that's it.",
							end_date: null,
							subreddit_coin_reward: 0,
							count: 2,
							static_icon_height: 512,
							name: "Silver",
							resized_static_icons: [
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_16.png",
									width: 16,
									height: 16,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_32.png",
									width: 32,
									height: 32,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_48.png",
									width: 48,
									height: 48,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_64.png",
									width: 64,
									height: 64,
								},
								{
									url: "https://www.redditstatic.com/gold/awards/icon/silver_128.png",
									width: 128,
									height: 128,
								},
							],
							icon_format: null,
							icon_height: 512,
							penny_price: null,
							award_type: "global",
							static_icon_url:
								"https://www.redditstatic.com/gold/awards/icon/silver_512.png",
						},
						{
							giver_coin_reward: 0,
							subreddit_id: null,
							is_new: false,
							days_of_drip_extension: 0,
							coin_price: 80,
							id: "award_8352bdff-3e03-4189-8a08-82501dd8f835",
							penny_donate: 0,
							award_sub_type: "GLOBAL",
							coin_reward: 0,
							icon_url:
								"https://i.redd.it/award_images/t5_q0gj4/ks45ij6w05f61_oldHugz.png",
							days_of_premium: 0,
							tiers_by_required_awardings: null,
							resized_icons: [
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/ks45ij6w05f61_oldHugz.png?width=16&amp;height=16&amp;auto=webp&amp;s=73a23bf7f08b633508dedf457f2704c522b94a04",
									width: 16,
									height: 16,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/ks45ij6w05f61_oldHugz.png?width=32&amp;height=32&amp;auto=webp&amp;s=50f2f16e71d2929e3d7275060af3ad6b851dbfb1",
									width: 32,
									height: 32,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/ks45ij6w05f61_oldHugz.png?width=48&amp;height=48&amp;auto=webp&amp;s=ca487311563425e195699a4d7e4c57a98cbfde8b",
									width: 48,
									height: 48,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/ks45ij6w05f61_oldHugz.png?width=64&amp;height=64&amp;auto=webp&amp;s=7b4eedcffb1c09a826e7837532c52979760f1d2b",
									width: 64,
									height: 64,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/ks45ij6w05f61_oldHugz.png?width=128&amp;height=128&amp;auto=webp&amp;s=e4d5ab237eb71a9f02bb3bf9ad5ee43741918d6c",
									width: 128,
									height: 128,
								},
							],
							icon_width: 2048,
							static_icon_width: 2048,
							start_date: null,
							is_enabled: true,
							awardings_required_to_grant_benefits: null,
							description: "Everything is better with a good hug",
							end_date: null,
							subreddit_coin_reward: 0,
							count: 1,
							static_icon_height: 2048,
							name: "Hugz",
							resized_static_icons: [
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/fpm0r5ryq1361_PolarHugs.png?width=16&amp;height=16&amp;auto=webp&amp;s=69997ace3ef4ffc099b81d774c2c8f1530602875",
									width: 16,
									height: 16,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/fpm0r5ryq1361_PolarHugs.png?width=32&amp;height=32&amp;auto=webp&amp;s=e9519d1999ef9dce5c8a9f59369cb92f52d95319",
									width: 32,
									height: 32,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/fpm0r5ryq1361_PolarHugs.png?width=48&amp;height=48&amp;auto=webp&amp;s=f076c6434fb2d2f9075991810fd845c40fa73fc6",
									width: 48,
									height: 48,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/fpm0r5ryq1361_PolarHugs.png?width=64&amp;height=64&amp;auto=webp&amp;s=85527145e0c4b754306a30df29e584fd16187636",
									width: 64,
									height: 64,
								},
								{
									url: "https://preview.redd.it/award_images/t5_q0gj4/fpm0r5ryq1361_PolarHugs.png?width=128&amp;height=128&amp;auto=webp&amp;s=b8843cdf82c3b741d7af057c14076dcd2621e811",
									width: 128,
									height: 128,
								},
							],
							icon_format: "PNG",
							icon_height: 2048,
							penny_price: 0,
							award_type: "global",
							static_icon_url:
								"https://i.redd.it/award_images/t5_q0gj4/fpm0r5ryq1361_PolarHugs.png",
						},
					],
					awarders: [],
					media_only: false,
					can_gild: false,
					spoiler: false,
					locked: false,
					author_flair_text: null,
					treatment_tags: [],
					visited: false,
					removed_by: null,
					num_reports: null,
					distinguished: null,
					subreddit_id: "t5_2tqlz",
					mod_reason_by: null,
					removal_reason: null,
					link_flair_background_color: "",
					id: "m62yl6",
					is_robot_indexable: true,
					report_reasons: null,
					author: "SteffS",
					discussion_type: null,
					num_comments: 116,
					send_replies: true,
					whitelist_status: "all_ads",
					contest_mode: false,
					mod_reports: [],
					author_patreon_flair: false,
					author_flair_text_color: null,
					permalink:
						"/r/youtubehaiku/comments/m62yl6/happy_birthday_to_this_subreddit_heres_the_first/",
					parent_whitelist_status: "all_ads",
					stickied: true,
					url: "https://youtu.be/yr_Rpk9HR1g",
					subreddit_subscribers: 2136694,
					created_utc: 1615877225.0,
					num_crossposts: 1,
					media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "Super \u041c\u0430\u0440\u0438\u043e Brothers",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 356,
							html: '&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/yr_Rpk9HR1g?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "rawrderder",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/yr_Rpk9HR1g/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/user/rawrderder",
						},
					},
					is_video: false,
				},
			},
			{
				kind: "t3",
				data: {
					approved_at_utc: null,
					subreddit: "youtubehaiku",
					selftext: "",
					author_fullname: "t2_fthgf",
					saved: false,
					mod_reason_title: null,
					gilded: 0,
					clicked: false,
					title: "This is so cute, but what does it say? [Haiku]",
					link_flair_richtext: [],
					subreddit_name_prefixed: "r/youtubehaiku",
					hidden: false,
					pwls: 6,
					link_flair_css_class: "haiku",
					downs: 0,
					thumbnail_height: 105,
					top_awarded_type: null,
					hide_score: false,
					name: "t3_m6j1co",
					quarantine: false,
					link_flair_text_color: "dark",
					upvote_ratio: 0.96,
					author_flair_background_color: null,
					subreddit_type: "public",
					ups: 133,
					total_awards_received: 0,
					media_embed: {
						content:
							'&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/mmE9Chzn29Q?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 356,
						scrolling: false,
						height: 200,
					},
					thumbnail_width: 140,
					author_flair_template_id: null,
					is_original_content: false,
					user_reports: [],
					secure_media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "This is so cute but what does it say?",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 356,
							html: '&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/mmE9Chzn29Q?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "shallty",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/mmE9Chzn29Q/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/c/shallty",
						},
					},
					is_reddit_media_domain: false,
					is_meta: false,
					category: null,
					secure_media_embed: {
						content:
							'&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/mmE9Chzn29Q?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 356,
						scrolling: false,
						media_domain_url: "https://www.redditmedia.com/mediaembed/m6j1co",
						height: 200,
					},
					link_flair_text: "Haiku",
					can_mod_post: false,
					score: 133,
					approved_by: null,
					author_premium: false,
					thumbnail:
						"https://b.thumbs.redditmedia.com/OttrYEpbSFPTM41H_ai9HJge6nOwn7XxQbnrzP7A3-U.jpg",
					edited: false,
					author_flair_css_class: null,
					author_flair_richtext: [],
					gildings: {},
					post_hint: "rich:video",
					content_categories: ["videos"],
					is_self: false,
					mod_note: null,
					created: 1615956551.0,
					link_flair_type: "text",
					wls: 6,
					removed_by_category: null,
					banned_by: null,
					author_flair_type: "text",
					domain: "youtu.be",
					allow_live_comments: false,
					selftext_html: null,
					likes: null,
					suggested_sort: null,
					banned_at_utc: null,
					url_overridden_by_dest: "https://youtu.be/mmE9Chzn29Q",
					view_count: null,
					archived: false,
					no_follow: false,
					is_crosspostable: false,
					pinned: false,
					over_18: false,
					preview: {
						images: [
							{
								source: {
									url: "https://external-preview.redd.it/9CUcgtI3pmkAJD76N4Po0Wv7hNhzOnvArv5NyK_1WIE.jpg?auto=webp&amp;s=c2c7c7578eb679c14955da7cd41ac0db7b4201e7",
									width: 480,
									height: 360,
								},
								resolutions: [
									{
										url: "https://external-preview.redd.it/9CUcgtI3pmkAJD76N4Po0Wv7hNhzOnvArv5NyK_1WIE.jpg?width=108&amp;crop=smart&amp;auto=webp&amp;s=46b14cb6b54eb29d53fb30339c96e13420320425",
										width: 108,
										height: 81,
									},
									{
										url: "https://external-preview.redd.it/9CUcgtI3pmkAJD76N4Po0Wv7hNhzOnvArv5NyK_1WIE.jpg?width=216&amp;crop=smart&amp;auto=webp&amp;s=0855e1ae74a9e6bede1656bafd89bae24df97dba",
										width: 216,
										height: 162,
									},
									{
										url: "https://external-preview.redd.it/9CUcgtI3pmkAJD76N4Po0Wv7hNhzOnvArv5NyK_1WIE.jpg?width=320&amp;crop=smart&amp;auto=webp&amp;s=8754c76a73982902c8647eb47612b1cb06557f1c",
										width: 320,
										height: 240,
									},
								],
								variants: {},
								id: "hV5j9ya6gMThuVhzUxZIlx6tlZk-yCaUKBThCvtjiS4",
							},
						],
						enabled: false,
					},
					all_awardings: [],
					awarders: [],
					media_only: false,
					can_gild: false,
					spoiler: false,
					locked: false,
					author_flair_text: null,
					treatment_tags: [],
					visited: false,
					removed_by: null,
					num_reports: null,
					distinguished: null,
					subreddit_id: "t5_2tqlz",
					mod_reason_by: null,
					removal_reason: null,
					link_flair_background_color: "",
					id: "m6j1co",
					is_robot_indexable: true,
					report_reasons: null,
					author: "duskulldoll",
					discussion_type: null,
					num_comments: 4,
					send_replies: true,
					whitelist_status: "all_ads",
					contest_mode: false,
					mod_reports: [],
					author_patreon_flair: false,
					author_flair_text_color: null,
					permalink:
						"/r/youtubehaiku/comments/m6j1co/this_is_so_cute_but_what_does_it_say_haiku/",
					parent_whitelist_status: "all_ads",
					stickied: false,
					url: "https://youtu.be/mmE9Chzn29Q",
					subreddit_subscribers: 2136694,
					created_utc: 1615927751.0,
					num_crossposts: 1,
					media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "This is so cute but what does it say?",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 356,
							html: '&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/mmE9Chzn29Q?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "shallty",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/mmE9Chzn29Q/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/c/shallty",
						},
					},
					is_video: false,
				},
			},
			{
				kind: "t3",
				data: {
					approved_at_utc: null,
					subreddit: "youtubehaiku",
					selftext: "",
					author_fullname: "t2_f7gwz",
					saved: false,
					mod_reason_title: null,
					gilded: 0,
					clicked: false,
					title: "Girls on Omegle [Meme]",
					link_flair_richtext: [],
					subreddit_name_prefixed: "r/youtubehaiku",
					hidden: false,
					pwls: 6,
					link_flair_css_class: "meme",
					downs: 0,
					thumbnail_height: 105,
					top_awarded_type: null,
					hide_score: false,
					name: "t3_m66y6u",
					quarantine: false,
					link_flair_text_color: "dark",
					upvote_ratio: 0.94,
					author_flair_background_color: null,
					subreddit_type: "public",
					ups: 602,
					total_awards_received: 0,
					media_embed: {
						content:
							'&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/b9hJuxbCSMc?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 356,
						scrolling: false,
						height: 200,
					},
					thumbnail_width: 140,
					author_flair_template_id: null,
					is_original_content: false,
					user_reports: [],
					secure_media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "Fake E Girl Meets Fake E Girl Meme",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 356,
							html: '&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/b9hJuxbCSMc?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "Nybbe GD",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/b9hJuxbCSMc/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/channel/UCCwgCdpRCWhyBZIGwRKovcQ",
						},
					},
					is_reddit_media_domain: false,
					is_meta: false,
					category: null,
					secure_media_embed: {
						content:
							'&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/b9hJuxbCSMc?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 356,
						scrolling: false,
						media_domain_url: "https://www.redditmedia.com/mediaembed/m66y6u",
						height: 200,
					},
					link_flair_text: "Meme",
					can_mod_post: false,
					score: 602,
					approved_by: null,
					author_premium: false,
					thumbnail:
						"https://a.thumbs.redditmedia.com/tdRZD6p8oj6lzQRlp7Ii9Y_kGdTOiSJM2vKZNSwV7z8.jpg",
					edited: false,
					author_flair_css_class: null,
					author_flair_richtext: [],
					gildings: {},
					post_hint: "rich:video",
					content_categories: ["videos"],
					is_self: false,
					mod_note: null,
					created: 1615923059.0,
					link_flair_type: "text",
					wls: 6,
					removed_by_category: null,
					banned_by: null,
					author_flair_type: "text",
					domain: "youtube.com",
					allow_live_comments: false,
					selftext_html: null,
					likes: null,
					suggested_sort: null,
					banned_at_utc: null,
					url_overridden_by_dest: "https://www.youtube.com/watch?v=b9hJuxbCSMc",
					view_count: null,
					archived: false,
					no_follow: false,
					is_crosspostable: false,
					pinned: false,
					over_18: false,
					preview: {
						images: [
							{
								source: {
									url: "https://external-preview.redd.it/1shh3IHQk4E6yAPWj3-AF1Y_0ohNyoseHP5Kmr6eHwU.jpg?auto=webp&amp;s=b0ba037b0943676bb073504e06acddf7946fa3a1",
									width: 480,
									height: 360,
								},
								resolutions: [
									{
										url: "https://external-preview.redd.it/1shh3IHQk4E6yAPWj3-AF1Y_0ohNyoseHP5Kmr6eHwU.jpg?width=108&amp;crop=smart&amp;auto=webp&amp;s=8cef0e7540a06d643accb79b8332756411b6ff32",
										width: 108,
										height: 81,
									},
									{
										url: "https://external-preview.redd.it/1shh3IHQk4E6yAPWj3-AF1Y_0ohNyoseHP5Kmr6eHwU.jpg?width=216&amp;crop=smart&amp;auto=webp&amp;s=2d5700712b7b074fecfcc5b1528a526f7cee3c87",
										width: 216,
										height: 162,
									},
									{
										url: "https://external-preview.redd.it/1shh3IHQk4E6yAPWj3-AF1Y_0ohNyoseHP5Kmr6eHwU.jpg?width=320&amp;crop=smart&amp;auto=webp&amp;s=28c97aeaa6164d23a9787ad74eb757cfc8a0adf4",
										width: 320,
										height: 240,
									},
								],
								variants: {},
								id: "WocM87PMEvhG4q5wOAAgh0TkWqiVK1Ei6PN8ZwIoy3A",
							},
						],
						enabled: false,
					},
					all_awardings: [],
					awarders: [],
					media_only: false,
					link_flair_template_id: "37d51ca4-36ff-11e6-ba84-0ef709bd46dd",
					can_gild: false,
					spoiler: false,
					locked: false,
					author_flair_text: null,
					treatment_tags: [],
					visited: false,
					removed_by: null,
					num_reports: null,
					distinguished: null,
					subreddit_id: "t5_2tqlz",
					mod_reason_by: null,
					removal_reason: null,
					link_flair_background_color: "",
					id: "m66y6u",
					is_robot_indexable: true,
					report_reasons: null,
					author: "PM_me_your_toaster",
					discussion_type: null,
					num_comments: 14,
					send_replies: true,
					whitelist_status: "all_ads",
					contest_mode: false,
					mod_reports: [],
					author_patreon_flair: false,
					author_flair_text_color: null,
					permalink: "/r/youtubehaiku/comments/m66y6u/girls_on_omegle_meme/",
					parent_whitelist_status: "all_ads",
					stickied: false,
					url: "https://www.youtube.com/watch?v=b9hJuxbCSMc",
					subreddit_subscribers: 2136694,
					created_utc: 1615894259.0,
					num_crossposts: 0,
					media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "Fake E Girl Meets Fake E Girl Meme",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 356,
							html: '&lt;iframe width="356" height="200" src="https://www.youtube.com/embed/b9hJuxbCSMc?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "Nybbe GD",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/b9hJuxbCSMc/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/channel/UCCwgCdpRCWhyBZIGwRKovcQ",
						},
					},
					is_video: false,
				},
			},
			{
				kind: "t3",
				data: {
					approved_at_utc: null,
					subreddit: "youtubehaiku",
					selftext: "",
					author_fullname: "t2_j8bla",
					saved: false,
					mod_reason_title: null,
					gilded: 0,
					clicked: false,
					title: "[Poetry] The one simple life hack that got the haters mad...",
					link_flair_richtext: [],
					subreddit_name_prefixed: "r/youtubehaiku",
					hidden: false,
					pwls: 6,
					link_flair_css_class: "poetry",
					downs: 0,
					thumbnail_height: 105,
					top_awarded_type: null,
					hide_score: false,
					name: "t3_m6bny7",
					quarantine: false,
					link_flair_text_color: "dark",
					upvote_ratio: 0.97,
					author_flair_background_color: null,
					subreddit_type: "public",
					ups: 233,
					total_awards_received: 0,
					media_embed: {
						content:
							'&lt;iframe width="267" height="200" src="https://www.youtube.com/embed/_DE3inDM5U0?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 267,
						scrolling: false,
						height: 200,
					},
					thumbnail_width: 140,
					author_flair_template_id: null,
					is_original_content: false,
					user_reports: [],
					secure_media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "The one simple life hack that got the haters mad...",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 267,
							html: '&lt;iframe width="267" height="200" src="https://www.youtube.com/embed/_DE3inDM5U0?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "PROF",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/_DE3inDM5U0/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/c/PROFGAMPO",
						},
					},
					is_reddit_media_domain: false,
					is_meta: false,
					category: null,
					secure_media_embed: {
						content:
							'&lt;iframe width="267" height="200" src="https://www.youtube.com/embed/_DE3inDM5U0?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
						width: 267,
						scrolling: false,
						media_domain_url: "https://www.redditmedia.com/mediaembed/m6bny7",
						height: 200,
					},
					link_flair_text: "Poetry",
					can_mod_post: false,
					score: 233,
					approved_by: null,
					author_premium: false,
					thumbnail:
						"https://b.thumbs.redditmedia.com/C3Grz51pWWLe665yiKD5O_fGQX5hmo81w7-4-KYZ9cE.jpg",
					edited: false,
					author_flair_css_class: null,
					author_flair_richtext: [],
					gildings: {},
					post_hint: "rich:video",
					content_categories: ["videos"],
					is_self: false,
					mod_note: null,
					created: 1615937414.0,
					link_flair_type: "text",
					wls: 6,
					removed_by_category: null,
					banned_by: null,
					author_flair_type: "text",
					domain: "youtube.com",
					allow_live_comments: false,
					selftext_html: null,
					likes: null,
					suggested_sort: null,
					banned_at_utc: null,
					url_overridden_by_dest: "https://www.youtube.com/watch?v=_DE3inDM5U0",
					view_count: null,
					archived: false,
					no_follow: false,
					is_crosspostable: false,
					pinned: false,
					over_18: false,
					preview: {
						images: [
							{
								source: {
									url: "https://external-preview.redd.it/nollBNm9ONXqoHgFBZx4va1O7VhY1_XmCeDAmBYFBW8.jpg?auto=webp&amp;s=5bddec7c5c82b285ac1a2bbf479a5558c9be3a7d",
									width: 480,
									height: 360,
								},
								resolutions: [
									{
										url: "https://external-preview.redd.it/nollBNm9ONXqoHgFBZx4va1O7VhY1_XmCeDAmBYFBW8.jpg?width=108&amp;crop=smart&amp;auto=webp&amp;s=057071e8c8830f8046b6b8f47bea30c94e743f97",
										width: 108,
										height: 81,
									},
									{
										url: "https://external-preview.redd.it/nollBNm9ONXqoHgFBZx4va1O7VhY1_XmCeDAmBYFBW8.jpg?width=216&amp;crop=smart&amp;auto=webp&amp;s=c840fb04d4b9bb490781640a26ca0c9064ae863b",
										width: 216,
										height: 162,
									},
									{
										url: "https://external-preview.redd.it/nollBNm9ONXqoHgFBZx4va1O7VhY1_XmCeDAmBYFBW8.jpg?width=320&amp;crop=smart&amp;auto=webp&amp;s=b97e0220c9b9e37695629fb081ad3c84d8b14550",
										width: 320,
										height: 240,
									},
								],
								variants: {},
								id: "0eWcxw_Z8FB49vFHh469VNm7GGPJ3BnRnd41ZcHt56Y",
							},
						],
						enabled: false,
					},
					all_awardings: [],
					awarders: [],
					media_only: false,
					can_gild: false,
					spoiler: false,
					locked: false,
					author_flair_text: null,
					treatment_tags: [],
					visited: false,
					removed_by: null,
					num_reports: null,
					distinguished: null,
					subreddit_id: "t5_2tqlz",
					mod_reason_by: null,
					removal_reason: null,
					link_flair_background_color: "",
					id: "m6bny7",
					is_robot_indexable: true,
					report_reasons: null,
					author: "Legenwaitforittt",
					discussion_type: null,
					num_comments: 5,
					send_replies: true,
					whitelist_status: "all_ads",
					contest_mode: false,
					mod_reports: [],
					author_patreon_flair: false,
					author_flair_text_color: null,
					permalink:
						"/r/youtubehaiku/comments/m6bny7/poetry_the_one_simple_life_hack_that_got_the/",
					parent_whitelist_status: "all_ads",
					stickied: false,
					url: "https://www.youtube.com/watch?v=_DE3inDM5U0",
					subreddit_subscribers: 2136694,
					created_utc: 1615908614.0,
					num_crossposts: 1,
					media: {
						type: "youtube.com",
						oembed: {
							provider_url: "https://www.youtube.com/",
							version: "1.0",
							title: "The one simple life hack that got the haters mad...",
							type: "video",
							thumbnail_width: 480,
							height: 200,
							width: 267,
							html: '&lt;iframe width="267" height="200" src="https://www.youtube.com/embed/_DE3inDM5U0?feature=oembed&amp;enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;',
							author_name: "PROF",
							provider_name: "YouTube",
							thumbnail_url: "https://i.ytimg.com/vi/_DE3inDM5U0/hqdefault.jpg",
							thumbnail_height: 360,
							author_url: "https://www.youtube.com/c/PROFGAMPO",
						},
					},
					is_video: false,
				},
			},
		],
		after: "t3_m6bny7",
		before: null,
	},
} as unknown as RedditListing<RedditListableThing>;

const sampleVideoPost: RedditPost = {
	kind: "t3",
	data: {
		approved_at_utc: null,
		subreddit: "space",
		selftext: "",
		user_reports: [],
		saved: false,
		mod_reason_title: null,
		gilded: 0,
		clicked: false,
		title: "A Look at Eclipses Through History and Why People Used to Be Afraid of Them",
		link_flair_richtext: [],
		subreddit_name_prefixed: "r/space",
		hidden: false,
		pwls: 6,
		link_flair_css_class: null,
		downs: 0,
		thumbnail_height: 78,
		top_awarded_type: null,
		parent_whitelist_status: "all_ads",
		hide_score: false,
		name: "t3_6u34g5",
		quarantine: false,
		link_flair_text_color: "dark",
		upvote_ratio: 0.87,
		author_flair_background_color: null,
		subreddit_type: "public",
		ups: 27406,
		total_awards_received: 0,
		media_embed: {},
		thumbnail_width: 140,
		author_flair_template_id: null,
		is_original_content: false,
		author_fullname: "t2_3wbcboz",
		secure_media: {
			reddit_video: {
				fallback_url: "https://v.redd.it/a7p2kpeni4gz/DASH_9_6_M?source=fallback",
				height: 1080,
				width: 1920,
				scrubber_media_url: "https://v.redd.it/a7p2kpeni4gz/DASH_600_K",
				dash_url:
					"https://v.redd.it/a7p2kpeni4gz/DASHPlaylist.mpd?a=1635169212%2CMGE5Y2ZmNTc5YTZhNjc1NTBlNGE1MzA5MjllYzMwYTJjMjEyM2E2Zjk5MTQ1ZTliNzNhODhkNzk0MDc3MGNkYw%3D%3D&amp;v=1&amp;f=sd",
				duration: 98,
				hls_url:
					"https://v.redd.it/a7p2kpeni4gz/HLSPlaylist.m3u8?a=1635169212%2CNjk1ODA4ZmZjOTQzODQ2MTU5NjNjZjExOTIwY2YwZWQ3YjZjYTQ0MjAxZDYyYjZiMTgzZmQ2NWEzNmI5ZWJhOQ%3D%3D&amp;v=1&amp;f=sd",
				is_gif: false,
				transcoding_status: "completed",
			},
		},
		is_reddit_media_domain: true,
		is_meta: false,
		category: null,
		secure_media_embed: {},
		link_flair_text: null,
		can_mod_post: false,
		score: 27406,
		approved_by: null,
		is_created_from_ads_ui: false,
		author_premium: false,
		thumbnail:
			"https://a.thumbs.redditmedia.com/_IGr0RTbElak-7UR6HAH55RZQgdu3u0YQE5wWcjPJt8.jpg",
		edited: false,
		author_flair_css_class: null,
		author_flair_richtext: [],
		gildings: {},
		post_hint: "hosted:video",
		content_categories: null,
		is_self: false,
		mod_note: null,
		created: 1502900316,
		link_flair_type: "text",
		wls: 6,
		removed_by_category: null,
		banned_by: null,
		author_flair_type: "text",
		domain: "v.redd.it",
		allow_live_comments: true,
		selftext_html: null,
		likes: null,
		suggested_sort: null,
		banned_at_utc: null,
		url_overridden_by_dest: "https://v.redd.it/a7p2kpeni4gz",
		view_count: null,
		archived: true,
		no_follow: false,
		is_crosspostable: true,
		pinned: false,
		over_18: false,
		preview: {
			images: [
				{
					source: {
						url: "https://external-preview.redd.it/wn9BvrPzZ_-B9xtA4RaIjazXN22dm6k0HUKUO4xm9Bg.png?format=pjpg&amp;auto=webp&amp;s=582dc75e56489760b476f3d7716f45a547d151e8",
						width: 1920,
						height: 1080,
					},
					resolutions: [
						{
							url: "https://external-preview.redd.it/wn9BvrPzZ_-B9xtA4RaIjazXN22dm6k0HUKUO4xm9Bg.png?width=108&amp;crop=smart&amp;format=pjpg&amp;auto=webp&amp;s=a6a2356ef1445cc81fe9c9e0aa12164dc4aa6e3b",
							width: 108,
							height: 60,
						},
						{
							url: "https://external-preview.redd.it/wn9BvrPzZ_-B9xtA4RaIjazXN22dm6k0HUKUO4xm9Bg.png?width=216&amp;crop=smart&amp;format=pjpg&amp;auto=webp&amp;s=958efc73f44a9e8b5dfd42aa9fe5395646705d74",
							width: 216,
							height: 121,
						},
						{
							url: "https://external-preview.redd.it/wn9BvrPzZ_-B9xtA4RaIjazXN22dm6k0HUKUO4xm9Bg.png?width=320&amp;crop=smart&amp;format=pjpg&amp;auto=webp&amp;s=899a06d5f32e8cefa958151298bf2e143a8bb2b6",
							width: 320,
							height: 180,
						},
						{
							url: "https://external-preview.redd.it/wn9BvrPzZ_-B9xtA4RaIjazXN22dm6k0HUKUO4xm9Bg.png?width=640&amp;crop=smart&amp;format=pjpg&amp;auto=webp&amp;s=e2e1403066dcc2da7cd097cb2bd774903e868f73",
							width: 640,
							height: 360,
						},
						{
							url: "https://external-preview.redd.it/wn9BvrPzZ_-B9xtA4RaIjazXN22dm6k0HUKUO4xm9Bg.png?width=960&amp;crop=smart&amp;format=pjpg&amp;auto=webp&amp;s=407c02c99a986834d58af7f1ddfc1918e70eb8eb",
							width: 960,
							height: 540,
						},
						{
							url: "https://external-preview.redd.it/wn9BvrPzZ_-B9xtA4RaIjazXN22dm6k0HUKUO4xm9Bg.png?width=1080&amp;crop=smart&amp;format=pjpg&amp;auto=webp&amp;s=51b0c6d96ca85fa17c545a51a13713a6b74ece5b",
							width: 1080,
							height: 607,
						},
					],
					variants: {},
					id: "xl1TVfMQVWdlZoPBA_ZmjtnCyF7bFhufFgqvOXArANI",
				},
			],
			enabled: false,
		},
		all_awardings: [],
		awarders: [],
		media_only: false,
		can_gild: true,
		spoiler: false,
		locked: false,
		author_flair_text: null,
		treatment_tags: [],
		visited: false,
		removed_by: null,
		num_reports: null,
		distinguished: null,
		subreddit_id: "t5_2qh87",
		author_is_blocked: false,
		mod_reason_by: null,
		removal_reason: null,
		link_flair_background_color: "",
		id: "6u34g5",
		is_robot_indexable: true,
		num_duplicates: 2,
		report_reasons: null,
		author: "timemagazine",
		discussion_type: null,
		num_comments: 1015,
		send_replies: true,
		media: {
			reddit_video: {
				fallback_url: "https://v.redd.it/a7p2kpeni4gz/DASH_9_6_M?source=fallback",
				height: 1080,
				width: 1920,
				scrubber_media_url: "https://v.redd.it/a7p2kpeni4gz/DASH_600_K",
				dash_url:
					"https://v.redd.it/a7p2kpeni4gz/DASHPlaylist.mpd?a=1635169212%2CMGE5Y2ZmNTc5YTZhNjc1NTBlNGE1MzA5MjllYzMwYTJjMjEyM2E2Zjk5MTQ1ZTliNzNhODhkNzk0MDc3MGNkYw%3D%3D&amp;v=1&amp;f=sd",
				duration: 98,
				hls_url:
					"https://v.redd.it/a7p2kpeni4gz/HLSPlaylist.m3u8?a=1635169212%2CNjk1ODA4ZmZjOTQzODQ2MTU5NjNjZjExOTIwY2YwZWQ3YjZjYTQ0MjAxZDYyYjZiMTgzZmQ2NWEzNmI5ZWJhOQ%3D%3D&amp;v=1&amp;f=sd",
				is_gif: false,
				transcoding_status: "completed",
			},
		},
		contest_mode: false,
		author_patreon_flair: false,
		author_flair_text_color: null,
		permalink: "/r/space/comments/6u34g5/a_look_at_eclipses_through_history_and_why_people/",
		whitelist_status: "all_ads",
		stickied: false,
		url: "https://v.redd.it/a7p2kpeni4gz",
		subreddit_subscribers: 19029764,
		created_utc: 1502900316,
		num_crossposts: 3,
		mod_reports: [],
		is_video: true,
	},
} as RedditPost;

const singlePostLinks = [
	[
		"https://reddit.com/r/space/comments/6u34g5/a_look_at_eclipses_through_history_and_why_people/",
		"6u34g5",
	],
	[
		"https://www.reddit.com/r/youtubehaiku/comments/lpmdmj/poetry_this_is_the_most_american_thing_ive_ever/",
		"lpmdmj",
	],
	["https://www.reddit.com/r/youtubehaiku/comments/lpmdmj/", "lpmdmj"],
	["https://www.reddit.com/comments/lpmdmj/", "lpmdmj"],
];

const subredditLinks = [
	"https://reddit.com/r/youtubehaiku",
	"https://www.reddit.com/r/youtubehaiku/new",
	"https://www.reddit.com/r/youtubehaiku/top.json?t=year",
];

const validLinks = [...subredditLinks].concat(singlePostLinks.map(([link, id]) => link));

const invalidLinks = [
	"https://reddit.com",
	"https://reddit.com/r",
	"https://reddit.com/r/",
	"https://www.reddit.com/comments",
	"https://www.reddit.com/comments/",
];

describe("Reddit", () => {
	describe("canHandleURL", () => {
		const adapter = new RedditAdapter();

		it.each(validLinks)("Accepts %s", link => {
			expect(adapter.canHandleURL(link)).toBe(true);
		});

		it.each(invalidLinks)("Rejects %s", link => {
			expect(adapter.canHandleURL(link)).toBe(false);
		});
	});

	describe("isCollectionURL", () => {
		const adapter = new RedditAdapter();

		it.each(subredditLinks)("should be collection url: %s", link => {
			expect(adapter.isCollectionURL(link)).toEqual(true);
		});

		it.each(singlePostLinks.map(l => l[0]))("should not be collection url: %s", link => {
			expect(adapter.isCollectionURL(link)).toEqual(false);
		});
	});

	describe("getVideoId", () => {
		it.each(singlePostLinks)("should be able to get the video id from %s", (link, id) => {
			const adapter = new RedditAdapter();
			expect(adapter.getVideoId(link)).toEqual(id);
		});
	});

	describe("resolveURL", () => {
		const adapter = new RedditAdapter();

		it("should get video urls", async () => {
			vi.spyOn(adapter.api, "get").mockResolvedValue({ data: subredditListResponse });

			const videos = await adapter.resolveURL("https://reddit.com/r/youtubehaiku");

			expect(videos).toHaveLength(4);
		});
	});

	describe("extractVideo", () => {
		const adapter = new RedditAdapter();

		it("should be able to extract a single reddit video out of a post", () => {
			const videos = adapter.extractVideos(sampleVideoPost);
			expect(videos).toHaveLength(1);
			expect(videos[0]).toEqual({
				service: "reddit",
				id: "6u34g5",
				title: "A Look at Eclipses Through History and Why People Used to Be Afraid of Them",
				description:
					"/r/space/comments/6u34g5/a_look_at_eclipses_through_history_and_why_people/",
				length: 98,
				thumbnail:
					"https://a.thumbs.redditmedia.com/_IGr0RTbElak-7UR6HAH55RZQgdu3u0YQE5wWcjPJt8.jpg",
				hls_url:
					"https://v.redd.it/a7p2kpeni4gz/HLSPlaylist.m3u8?a=1635169212%2CNjk1ODA4ZmZjOTQzODQ2MTU5NjNjZjExOTIwY2YwZWQ3YjZjYTQ0MjAxZDYyYjZiMTgzZmQ2NWEzNmI5ZWJhOQ%3D%3D&amp;v=1&amp;f=sd",
				mime: "application/x-mpegURL",
			});
		});

		it("should be able to extract a list of videos out of a subreddit", () => {
			const videos = adapter.extractVideos(subredditListResponse);
			expect(videos).toHaveLength(4);
			expect(videos[0]).toEqual({
				url: "https://youtu.be/yr_Rpk9HR1g",
			});
		});
	});
});
